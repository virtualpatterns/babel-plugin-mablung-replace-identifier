{"version":3,"sources":["../../../source/test/library/visitor-multiple.test.js"],"names":["createRequire","CreateRequire","DefaultBabel","ModuleBabel","Test","Babel","Require","import","meta","url","beforeEach","test","context","codeIn","option","resolve","code","actualCodeOut","transformAsync","expectedCodeOut","is"],"mappings":"AAAA,SAASA,aAAa,IAAIC,aAA1B,QAA+C,QAA/C;AACA,OAAOC,YAAP,EAAqB,KAAKC,WAA1B,MAA2C,aAA3C;AACA,OAAOC,IAAP,MAAiB,KAAjB;;AAEA,MAAMC,KAAK,GAAGH,YAAY,IAAIC,WAA9B;AACA,MAAMG,OAAO,GAAGL,aAAa,CAACM,MAAM,CAACC,IAAP,CAAYC,GAAb,CAA7B;;AAEAL,IAAI,CAACM,UAAL,CAAiBC,IAAD,IAAU;;AAExBA,EAAAA,IAAI,CAACC,OAAL,CAAaC,MAAb,GAAsB,wDAAtB;AACAF,EAAAA,IAAI,CAACC,OAAL,CAAaE,MAAb,GAAsB;AACpB,eAAW;AACT;AACER,IAAAA,OAAO,CAACS,OAAR,CAAgB,iBAAhB,CADF;AAEE;AACE,cAAQ;AACN;AACE,qBAAa,YADf;AAEE,uBAAe,mDAFjB;AAGE,wBAAgB;AACd,qBAAW,CAAE,YAAF,CADG;AAEd,wBAAc,QAFA,EAHlB;;AAOE,qBAAa;AACX;AACE,kBAAQ,SADV;AAEE,oBAAU,KAFZ;AAGE,oBAAU;AACR,wBAAY,KADJ,EAHZ,EADW,CAPf,EADM;;;;;AAkBN;AACE,qBAAa,WADf;AAEE,uBAAe,qCAFjB;AAGE,wBAAgB;AACd,qBAAW,CAAE,YAAF,CADG;AAEd,wBAAc,QAFA,EAHlB;;AAOE,qBAAa;AACX;AACE,kBAAQ,OADV;AAEE,kBAAQ,eAFV;AAGE,oBAAU,QAHZ,EADW,CAPf,EAlBM,CADV,EAFF,CADS,CADS,EAAtB;;;;;;;;;;AA4CD,CA/CD;;AAiDAX,IAAI,CAAC,sHAAD,EAAyH,MAAOO,IAAP,IAAgB;;AAE3I,MAAI,EAAEK,IAAI,EAAEC,aAAR,KAA0B,MAAMZ,KAAK,CAACa,cAAN,CAAqBP,IAAI,CAACC,OAAL,CAAaC,MAAlC,EAA0CF,IAAI,CAACC,OAAL,CAAaE,MAAvD,CAApC;AACA,MAAIK,eAAe,GAAG,iMAAtB;;AAEAR,EAAAA,IAAI,CAACS,EAAL,CAAQH,aAAR,EAAuBE,eAAvB;;AAED,CAPG,CAAJ","sourcesContent":["import { createRequire as CreateRequire } from 'module'\nimport DefaultBabel, * as ModuleBabel from '@babel/core'\nimport Test from 'ava'\n\nconst Babel = DefaultBabel || ModuleBabel\nconst Require = CreateRequire(import.meta.url)\n\nTest.beforeEach((test) => {\n\n  test.context.codeIn = 'const FilePath = __filePath\\nconst Require = __require'\n  test.context.option = { \n    'plugins': [ \n      [\n        Require.resolve('../../index.cjs'),\n        {\n          'rule': [\n            {\n              'searchFor': '__filePath',\n              'replaceWith': '__importIdentifier.fileURLToPath(import.meta.url)',\n              'parserOption': { \n                'plugins': [ 'importMeta' ], \n                'sourceType': 'module' \n              },\n              'addImport': [\n                {\n                  'type': 'default',\n                  'source': 'url',\n                  'option': {\n                    'nameHint': 'URL'\n                  }\n                }\n              ]\n            },\n            {\n              'searchFor': '__require',\n              'replaceWith': '__importIdentifier(import.meta.url)',\n              'parserOption': { \n                'plugins': [ 'importMeta' ], \n                'sourceType': 'module' \n              },\n              'addImport': [\n                {\n                  'type': 'named',\n                  'name': 'createRequire',\n                  'source': 'module'\n                }\n              ]\n            }\n          ]\n        }      \n      ]\n    ]\n  }\n  \n})\n\nTest('rule.replaceWith = \\'__importIdentifier.fileURLToPath(import.meta.url)\\' and \\'__importIdentifier(import.meta.url)\\'', async (test) => {\n\n  let { code: actualCodeOut } = await Babel.transformAsync(test.context.codeIn, test.context.option)\n  let expectedCodeOut = 'import { createRequire as _createRequire } from \"module\";\\nimport _URL from \"url\";\\n\\nconst FilePath = _URL.fileURLToPath(import.meta.url);\\n\\nconst Require = _createRequire(import.meta.url);'\n\n  test.is(actualCodeOut, expectedCodeOut)\n\n})\n"],"file":"visitor-multiple.test.js"}